/*
 * QSwipe 0.0.1
 * Mobile touch slider and framework with pure page transition effects 
 *
 * http://isux.qq.com
 *
 * Copyright 2010-2014, Leon
 *
 * Licensed under GPL, MIT
 *
 * Released on: December 15, 2014
*/
!function(a){"use strict";a.fn.QSwipe=function(b){function c(){p.css(g?{"-webkit-transform":"translateY(100%)"}:{"-webkit-transform":"translateX(100%)"}),p.parent().css({overflow:"hidden"}),p.css({overflow:"hidden","-webkit-backface-visibility":"hidden"}),p.eq(0).css({"-webkit-transform":"translate(0,0)"})}function d(){function b(b){if(!(b.touches.length>1||s||r)){var c=b.targetTouches[0].pageX,d=b.targetTouches[0].pageY;j.startX=j.currentX=c,j.startY=j.currentY=d,j.start=j.current=g?d:c,f=a(b.target),f.is(x)||(f=f.parents(x)),r=!0,q.onTouchStartFunc&&(l={index:t,movePenc:Math.abs(k.current)/g?v:u,distX:0,distY:0},q.onTouchStartFunc(l))}}function c(a){a.touches.length>1||!r||(a.preventDefault&&a.preventDefault(),d(a),q.onTouchMoveFunc&&(l={index:t,movePenc:Math.abs(k.current)/g?v:u,distX:k.currentX,distY:k.currentY},q.onTouchMoveFunc(l)))}function d(a){var b=h,c=0,d=0;switch(j.currentX=a.targetTouches[0].pageX,j.currentY=a.targetTouches[0].pageY,k.currentX=j.currentX-j.startX,k.currentY=j.currentY-j.startY,g?(j.current=j.currentY,c=k.currentY):(j.current=j.currentX,c=k.currentX),k.current=c,b){case"none":!function(){}(a);break;case"normal":!function(a){d=c,A(a,c,d)}(a);break;case"scale":!function(a){d=c,B(a,c,d)}(a);break;case"fade":!function(a){d=c,C(a,c,d)}(a);break;case"ease":!function(a){d=c,D(a,c,d)}(a);break;case"bounce":!function(a){d=c,E(a,c,d)}(a);break;case"gule":!function(a){d=c,G(a,c,d)}(a);break;case"cubein":!function(a){d=c,moveWithCubeInTran(a,c,d)}(a);break;case"cubeout":!function(a){d=c,H(a,c,d)}(a)}}function y(a,b){var c=k.current=a;return c>0?(w=g?"down":"right",i=f.prev(x)):0>c&&(w=g?"up":"left",i=f.next(x)),i&&0!==i.size()?c:(s=!1,r=!1,void(b&&b()))}function z(){"up"===w?(p.css({"-webkit-transform":"translate(0,-100%)"}),f.css({"-webkit-transform":"translate(0,0)"})):"down"===w?(p.css({"-webkit-transform":"translate(0,100%)"}),f.css({"-webkit-transform":"translate(0,0)"})):"left"===w?(p.css({"-webkit-transform":"translate(-100%,0)"}),f.css({"-webkit-transform":"translate(0,0)"})):"right"===w&&(p.css({"-webkit-transform":"translate(100%,0)"}),f.css({"-webkit-transform":"translate(0,0)"}))}function A(a,b,c){var d=y(b,z);if(d){var e,g;"up"===w?(e="translate(0,"+b+"px)",g="translate(0,"+(c+v)+"px)"):"down"===w?(e="translate(0,"+b+"px)",g="translate(0,"+(c-v)+"px)"):"left"==w?(e="translate("+b+"px,0)",g="translate("+(c+u)+"px,0)"):(e="translate("+b+"px,0)",g="translate("+(c-u)+"px,0)"),s=!0,f.css({"-webkit-transition":"none","-webkit-transform":e}),i.css({"-webkit-transition":"none","-webkit-transform":g})}}function B(a,b){var c=y(b,z);if(c){var d,e,g;"up"===w?(d="scale("+(1-Math.abs(c/v))+")",e="translate(0,"+(c+v)+"px)",g="50% 0%"):"down"===w?(d="scale("+(1-Math.abs(c/v))+")",e="translate(0,"+(c-v)+"px)",g="50% 100%"):"left"===w?(d="scale("+(1-Math.abs(c/u))+")",e="translate("+(c+u)+"px,0)",g="0% 50%"):(d="scale("+(1-Math.abs(c/u))+")",e="translate("+(c-u)+"px,0)",g="100% 50%"),s=!0,f.css({"-webkit-transition":"none","-webkit-transform":d,"-webkit-transform-origin":g}),i.css({"-webkit-transition":"none","-webkit-transform":e})}}function C(a,b,c){A(a,b,c);var d;d=parseFloat(g?Math.abs(b)/v:Math.abs(b)/u),r&&(f.css({opacity:Math.max(1-3*d/2,0)}),i.css({opacity:Math.min(1,2*d)}))}function D(a,b,c){A(a,.6*b,c),f.css({"z-index":"999"})}function E(a,b){var c=y(b,z);if(c){var d,e,g,h,j;j=parseFloat(Math.abs(c/v)/6),g=Math.max(1-j,.85),h=Math.max(1-4*j,.3),"up"===w?(d="scale("+g+")",e="translate(0,"+(c+v)+"px)"):"down"===w?(d="scale("+g+")",e="translate(0,-"+(v-c)+"px)"):"left"===w?(d="scale("+g+")",e="translate("+(c+u)+"px,0)"):"right"===w&&(d="scale("+g+")",e="translate("+(c-u)+"px,0)"),s=!0,f.css({"-webkit-transition":"none","-webkit-transform":d,opacity:h,"z-index":"9"}),i.css({"-webkit-transition":"none","-webkit-transform":e,"z-index":"999",opacity:"1"})}}function F(a,b,c,d){var e,g,h;"up"===w?(h="50% 0%",g="translate(0,"+(v+d)+"px)",e="rotateX("+-a+"deg)"):"down"===w?(h="50% 100%",g="translate(0,"+(c-v)+"px)",e="rotateX("+a+"deg)"):"left"==w?(h="0% 50%",g="translate("+(u+d)+"px,0)",e="rotateY("+a+"deg)"):"right"==w&&(h="100% 50%",g="translate("+(c-u)+"px,0)",e="rotateY("+-a+"deg)"),n.css({position:"relative","-webkit-perspective":"1200px"}),f.css({"-webkit-transition":"none","-webkit-transform":e,"-webkit-transform-origin":h,"transform-style":"preserve-3d","z-index":"9",opacity:Math.max(1-b,.3)}),i.css({"-webkit-transition":"none","-webkit-transform":g,"z-index":"999",opacity:"1"})}function G(a,b,c){var d=y(b,z);if(d){var e,g,h,j;g=parseFloat(Math.abs(d/v)/6),h=Math.min(10*g,.7),j=q.tranRange||20,e=Math.min(h*j,80),F(e,h,b,c),s=!0,("down"===w||"right"===w)&&(f.css({opacity:Math.max(1-h,.3),"z-index":"9"}),i.css({"z-index":"999",opacity:"1"}))}}function H(a,b,c){var d=y(b,z);if(d){var e,h,j,k,l,m,o;o=g?Math.abs(d)/v:Math.abs(d)/u,l=90*o,m=Math.min(o,.8),s=!0,"up"===w?(k="50% 0%",j="50% 100%",h="translate(0,"+(v+c)+"px)",e="translate(0,"+b+"px)  rotateX("+l+"deg)"):"down"===w?(k="50% 100%",j="50% 0%",h="translate(0,"+(c-v)+"px) rotateX("+(90-l)+"deg)",e="translate(0,"+b+"px)  rotateX("+-l+"deg)"):"left"==w?(k="0% 50%",j="100% 50%",h="translate("+(u+c)+"px,0)",e="translate("+b+"px,0)  rotateY("+-l+"deg)"):"right"==w&&(k="100% 50%",j="0% 50%",h="translate("+(c-u)+"px,0)",e="translate("+b+"px,0)  rotateY("+l+"deg)"),I(),n.css({position:"relative","-webkit-perspective":"1200px"}),f.css({"-webkit-transition":"none","-webkit-transform":e,"-webkit-transform-origin":j,"transform-style":"preserve-3d","z-index":"999",opacity:"1"}),i.css({"-webkit-transition":"none","-webkit-transform":h,"-webkit-transform-origin":k,"z-index":"9",opacity:Math.max(1-m,.6)})}}function I(){"up"===w?J("translate(0,-100%)","translate(0,100%)"):"down"===w?J("translate(0,-100%) rotateX(-90deg)","translate(0,100%)"):"left"===w?J("translate(-100%,0)","translate(100%,0)"):"right"===w&&J("translate(-100%,0)","translate(100%,0)")}function J(a,b){for(var c=0;o>c;c++)if(t>c)p.eq(c).css({"-webkit-transform":a});else{if(!(c>t))continue;p.eq(c).css({"-webkit-transform":b})}}function K(a){s&&r&&(T(a),r=!1,q.onTouchEndFunc&&(l={index:t,movePenc:Math.abs(k.current)/g?v:u,distX:k.currentX,distY:k.currentX},q.onTouchEndFunc(l)))}function L(){var b,c,d,h=g?v:u;d=Math.abs(k.current)/h>e?!0:!1,d?"up"===w?(b="translate(0,-100%)",c="translate(0, 0)",t++):"down"===w?(b="translate(0,100%)",c="translate(0, 0)",t--):"left"==w?(b="translate(-100%,0)",c="translate(0, 0)",t++):(b="translate(100%,0)",c="translate(0, 0)",t--):"up"===w?(b="translate(0, 0)",c="translate(0, 100%)"):"down"===w?(b="translate(0, 0)",c="translate(0,-100%)"):"left"===w?(b="translate(0, 0)",c="translate(100%,0)"):"right"===w&&(b="translate(0, 0)",c="translate(-100%,0)"),f.css({"-webkit-transition":"-webkit-transform 0.4s ease-out,opacity 0.4s ease-out","-webkit-transform":b}).one("webkitTransitionEnd",function(){a(this).css({"-webkit-transform":b}),s=!1,f=null,i=null}),i.css({"-webkit-transition":"-webkit-transform 0.4s ease-out,opacity 0.4s ease-out","-webkit-transform":c}),d&&i.one("webkitTransitionEnd",function(){a(x).removeClass(q.activeClass);var b=a(this);b.addClass(q.activeClass)})}function M(){var b,c,d,h=g?v:u;m=Math.abs(k.current)/h>e?!0:!1,m?"up"===w?(b="scale(0)",c="translate(0, 0)",d="50% 0%",t++):"down"===w?(b="scale(0)",c="translate(0, 0)",d="50% 100%",t--):"left"==w?(b="scale(0)",c="translate(0, 0)",d="0% 50%",t++):(b="scale(0)",c="translate(0, 0)",d="100% 50%",t--):"up"===w?(b="translate(0, 0)",c="translate(0, 100%) scale(1)",d="50% 0%"):"down"===w?(b="translate(0, 0)",c="translate(0,-100%) scale(1)",d="50% 100%"):"left"===w?(b="translate(0, 0)",c="translate(100%,0) scale(1)",d="0% 50%"):"right"===w&&(b="translate(0, 0)",c="translate(-100%,0) scale(1)",d="100% 50%"),f.css({"-webkit-transition":"-webkit-transform 0.4s ease-out","-webkit-transform":b,"-webkit-transform-origin":d}).one("webkitTransitionEnd",function(){a(this).css({"-webkit-transform":b}),s=!1,f=null,i=null}),i.css({"-webkit-transition":"-webkit-transform 0.4s ease-out","-webkit-transform":c}).one("webkitTransitionEnd",function(){a(x).removeClass(q.activeClass);var b=a(this);b.addClass(q.activeClass)})}function N(){L();var a,b=g?v:u;a=Math.abs(k.current)/b>e?!0:!1,a?(f.css({"-webkit-transition":"-webkit-transform 0.4s ease-out,opacity 0.4s ease-out",opacity:"0"}),i.css({"-webkit-transition":"-webkit-transform 0.4s ease-out,opacity 0.4s ease-out",opacity:"1"})):(f.css({"-webkit-transition":"-webkit-transform 0.4s ease-out,opacity 0.4s ease-out",opacity:"1"}),i.css({"-webkit-transition":"-webkit-transform 0.4s ease-out,opacity 0.4s ease-out",opacity:"0"}))}function O(){L(),f.css({"-webkit-transition":"-webkit-transform 0.7s ease","z-index":"999"}),i.css({"-webkit-transition":"-webkit-transform 0.4s ease-out"})}function P(){L();var a,b,c=g?v:u;m=Math.abs(k.current)/c>e?!0:!1,m?(a={"-webkit-transition":"-webkit-transform 0.5s ease-out,opacity  0.5s ease-out","-webkit-transform":"scale(0.8) translate(0,0)",opacity:"0","z-index":"9"},b={"-webkit-transition":"-webkit-transform 0.6s ease",opacity:"1","z-index":"999"}):(a={"-webkit-transition":"-webkit-transform 0.5s ease-out,opacity  0.5s ease-out","-webkit-transform":"scale(1) translate(0,0)",opacity:"1","z-index":"9"},b={"-webkit-transition":"-webkit-transform 0.5s ease-out,opacity  0.5s ease-out",opacity:"0","z-index":"999"}),f.css(a),i.css(b)}function Q(){L();var a,b,c=g?v:u;m=Math.abs(k.current)/c>e?!0:!1,m&&(q.isEndRestore?(a={"-webkit-transform":"scale(1) translate3d(0,0,0)",opacity:"0","transition-timing-function":"ease"},b={"-webkit-transform":"scale(1) translate3d(0,0,0)",opacity:1,"transition-timing-function":"ease"}):(a={"-webkit-transform":"scale(0.8) translateZ(-200px)",opacity:"0","transition-timing-function":"ease"},b={"-webkit-transform":"scale(1) translate3d(0,0,0)",opacity:1,"transition-timing-function":"ease"})),f.css(a),i.css(b)}function R(){L();var a,b,c=g?v:u;m=Math.abs(k.current)/c>e?!0:!1,m?"up"===w?(a={"-webkit-transform":"translateY(-100%) rotateX(90deg) ",opacity:"0","z-index":"9","transition-timing-function":"ease"},b={"-webkit-transform":"translateY(0) rotateX(0deg) ",opacity:"1","transition-timing-function":"ease"}):"down"===w?(a={"-webkit-transform":"translateY(100%) rotateX(-90deg) ","z-index":"999",opacity:"0"},b={"z-index":"9",opacity:"1"}):"left"===w?a={"-webkit-transform":"translateX(-100%) rotateY(-90deg) "}:"right"===w&&(a={"-webkit-transform":"translateX(100%) rotateY(90deg) "}):(a={opacity:"1"},b={opacity:"0"},"up"===w?b={"-webkit-transform":"translate3d(0,100%,0) "}:"down"===w?b={"-webkit-transform":"translate3d(0,-100%,0) "}:"left"===w?b={"-webkit-transform":"translate3d(100%,0,0) "}:"right"===w&&(b={"-webkit-transform":"translate3d(-100%,0,0) "})),f.css(a),i.css(b)}function S(){L();var a,b,c=g?v:u;m=Math.abs(k.current)/c>e?!0:!1,m?(a={opacity:"0","transition-timing-function":"ease"},b={"-webkit-transform":"translateY(0) rotateX(0deg) ",opacity:1,"transition-timing-function":"ease"},"up"===w?a={"-webkit-transform":"translateY(-100%) rotateX(90deg) ","z-index":"9",opacity:"0"}:"down"===w?a={"-webkit-transform":"translateY(100%) rotateX(-90deg) ","z-index":"9",opacity:"0"}:"left"===w?a={"-webkit-transform":"translateX(-100%) rotateY(-90deg)","z-index":"9",opacity:"0"}:"right"===w&&(a={"-webkit-transform":"translateX(100%)  rotateY(90deg)","z-index":"9",opacity:"0"})):(b={"z-index":"1"},"up"===w?b={"-webkit-transform":"translate3d(0,100%,0) ","z-index":"1"}:"down"===w?b={"-webkit-transform":"translate3d(0,-100%,0) rotateX(90deg)","z-index":"1"}:"left"===w?b={"-webkit-transform":"translate3d(100%,0,0)"}:"right"===w&&(b={"-webkit-transform":"translate3d(-100%,0,0) rotateY(90deg)"})),f.css(a),i.css(b)}function T(a){var b=h;switch(b){case"none":!function(){}(a);break;case"normal":!function(){L()}(a);break;case"scale":!function(){M()}();break;case"fade":!function(){N()}();break;case"ease":!function(){O()}();break;case"bounce":!function(){P()}();break;case"gule":!function(){Q()}();break;case"cubein":!function(){R()}();break;case"cubeout":!function(){S()}()}}p.on("touchstart",b),p.on("touchmove",c),p.on("touchend",K),p.on("webkitAnimationEnd",function(){p.isMoving=!1}),a(document).on("touchmove",function(a){a.preventDefault()})}var e,f,g,h,i,j,k,l,m,n,o,p=a(this),q=a.extend({},a.fn.QSwipe.defaults,b),r=((new Date).getTime(),!1),s=!1,t=0,u=0,v=0,w="",x=p.selector;g="vertical"===q.mode,h=q.effect,e=parseFloat(q.movePercent),u=p.width(),v=p.height(),n=p.parent(),o=p.size(),j={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0},k={current:0,currentX:0,currentY:0},l={width:u,height:v},c(),d()},a.fn.QSwipe.defaults={mode:"vertical",movePercent:"0.2",inter:"300",activeClass:"play",effect:"normal",tranRange:"15",isEndRestore:!0}}(window.Zepto||window.jQuery);